<div class="large-container center-block">
    <h1><%= @article.title %></h1>
    <div>
        <p>Escrito por: <strong><%= @article.user.name %></strong> </p>
    </div>
    <div>
        <%= @article.content %>
    </div>

    <div class="margin-top">
        <p class="label">Tags</p>

        <% @article.categories.each do |category| %>
            <span class="badge badge-pill padding" style="background-color:<%= category.color %>">
                <%= link_to category.title, category, class: "text-white" %>
            </span>
        <% end %>

    </div>

    <%= link_to "EDITAR", edit_article_path, class: "link" %>

    <div>
        <%= link_to "ELIMINAR ARTICULO", @article, method: :delete %>
    </div>


    <div>
        <h2>Agregar Comentario</h2>
        <%= form_with(model: [ @article, Comment.new ], local: true) do |form| %>
            <%= form.text_area :text, placeholder: 'Escribe tu comentario' %>
            <%= form.submit 'Enviar comentario' %>
        <% end %>
    </div>

    <div>
        <h2>Comentarios</h2>
        <% @article.comments.each do |comment| %>
        <div>
            <% if comment.user.avatar.present? %>
                <%= image_tag comment.user.avatar.variant(resize: '50x50^', crop: '50x50+0+0'), width: 50, height: 50 %>
            <% end %>
            <p>Publicado por: <%= comment.user_name %></p>
            <p>Publicado: <%= comment.created_at.strftime("%d/%m/%Y") %></p>
            <p><%= comment.text %></p>

            <% if current_user == comment.user %>
                <%= button_to "Eliminar comentario", article_comment_path(@article, comment), method: :delete, data: { confirm: "¿Estás seguro de eliminar este comentario?" } %>
            <% end %>
        </div>
        <% end %>
    </div>
</div>
